<project name="TesTLinkAPIJavaClient" default="dist" basedir=".">

	<description>Build the testlink-api-client.jar</description>

	<tstamp>
		<format property="dist.date" pattern="yyyyMMdd" locale="en,US"/>
	</tstamp>

	<!-- set global properties for this build -->
	<property name="src.home" value="../src"/>
	<property name="dist.home" value="dist/${dist.date}"/>
	<property name="compile.home" value="../bin"/>
	<property name="compile.lib" value="../lib"/>
	<property name="dist.version" value="1.0"/>
	<property name="javadoc.home" value="${dist.home}/javadoc"/>
	<property name="javadoc.include" value="org/dbfacade/testlink/**"/>
	<property name="javadoc.exclude" value="org/dbfacade/testlink/api/client/junit/**"/>

    
	<path id="local.classpath">
		<fileset dir="${compile.lib}">
			<include name="**/*.jar"/>
		</fileset>
	</path>

	<target name="init">
		<delete dir="${dist.home}"/>
		<mkdir dir="${compile.home}"/>
		<mkdir dir="${dist.home}"/>
		<mkdir dir="${javadoc.home}"/>
		<mkdir dir="${dist.home}/lib"/>
	</target>


	<target name="compile" depends="init">
		<javac fork="true" destdir="${compile.home}"
			classpathref="local.classpath"
			memoryinitialsize="256m"       
			memorymaximumsize="512m"
			deprecation="yes"
			debug="yes"
			source="1.5"
			nowarn="true"
			debuglevel="lines,vars,source">
			<src path="${src.home}"/>
		</javac>
	</target>

	<target name="dist" depends="compile,documentation" description="Generate the TestLink API Client distribution">
		<jar jarfile="${dist.home}/testlink-api-client-${dist.version}.jar" basedir="${compile.home}"/>
		<copy todir="${dist.home}/lib" preservelastmodified="true">
			<fileset dir="${compile.lib}" includes="**/*.jar"/>
		</copy>
	</target>

	<target name="documentation" depends="init">
		<javadoc
			destdir="${javadoc.home}"
			author="true"
			version="true"
			use="true"
			windowtitle="Test API">
	
			<packageset dir="${src.home}" defaultexcludes="yes">
				<include name="${javadoc.include}"/>
				<exclude name="${javadoc.exclude}"/>
			</packageset>
	
			<doctitle><![CDATA[<h1>TestLink API Java Client</h1>]]></doctitle>
			<bottom><![CDATA[<i>Copyright &#169; 2009 Database Facade. All Rights Reserved.</i>]]></bottom>
			<group title="TestLink API Client Package" packages="org.dbfacade.testlink.a*"/>
			<group title="Automated Testing Support Package" packages="org.dbfacade.testlink.t*"/>
		</javadoc>
	</target>
	

</project>
